Procedural Terrains
=================================================================================

.. image:: _static/terrain_proc_intro.png 

Mirage can generate terrain meshes using real-world measurements, while also
make useful vertex groups and applying different features (such as erosion or
strata).


Detail Level
---------------------------------------------------------------------------------

The detail level setting controls how many vertex the terrain mesh will have.
Increasing the level of detail will increase calculation time and memory usage.

Mirage offers three basic levels: normal, medium and high. There's also
a custom option to fine tune the level of detail (see below)

Terrain meshes are created from a plane subdivided in segments. The vertex
count results from how many segments are used. For instance, the `Normal` level of
detail has 128 segments, resulting in 16,384 vertices (128x128 = 16,384).

`Normal` and `Medium` are usually good enough for everything (specially when
used with subdivision and multires).
`High` is great if you are creating a massive terrain and don't plan on changing
it much. 

Mirage will always generate the same terrain for the same seed, so you can use the
different detail levels to bake higher detail into meshes with less geometry. `Check
the Blender manual for more information on baking
<https://www.blender.org/manual/render/workflows/bake.html>`_

.. image:: _static/terrain_proc_detail.jpg
	   
.. warning:: 
   Watch out for memory usage when generating many terrains with high detail levels.
   Blender will keep data around for undo, making RAM usage grow and grow. Save and
   restart Blender if you see memory usage in the info bar growing too big.



Custom detail level
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

It's also possible to select a custom level of detail besides the basic three.
Simply select `Custom` in the detail level menu.

You will see two new settings: segments and seed grid.

Segments
         This controls how many times the plane will be subdivided. Increasing
	 this setting will increase vertex count. Note that this number will
	 be rounded automatically according to the base grid.

	 
Seed Grid
         Increases the amount of fine detail in the terrain. Mirage's 
	 algorithm uses a base grid of white noise to generate the terrain.
	 By default this grid always has a size of 100x100. However you can
	 increase this up to be the same as the number of segments (getting
	 the biggest amount of detail).


.. note::
   Changing the Seed Grid setting will give you a different terrain, even with
   the same seed! 



Checking Progress and time
---------------------------------------------------------------------------------

When you click the `Generate` button it will be replaced by a progress message
and a cancel button. Note that you can still use Blender while the terrain is
being generated (the message reads "Generating terrain").

Once the message changes to "Linking to scene" Blender's UI will be blocked and
you won't be able to cancel. On terrains with high detail levels it might look
like Blender has frozen. Don't worry it will become responsive in a few minutes.

Mirage will also print how long it took to generate the terrain once it's
finished in the console, as well as how long it took to be linked to the scene.
This can help you get a "feel" for how long it takes to generate terrains at
different detail levels in your computer.
To know more about running Blender from a terminal (or console)
`check the wiki.
<http://wiki.blender.org/index.php/User:Fade/Doc:2.6/Manual/Interface/Window_system/Console_window>`_

.. note::
   The progress message is only available on Mac and Linux. On Windows the UI
   will block, but you can still see the benchmarks in the console.


What does "Linking to scene" mean?
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Once Mirage has generated the terrain data (the heights), it applies them to a mesh
and puts that mesh in an object. Finally the object is added to the current scene
(linked). These steps are simply called "Linking to Scene" in the UI.

This distinction between generating and linking is made because linking will
block the UI. So if you see Mirage is "Linking to Scene" you can tell Blender
isn't frozen, just adding the terrain into the scene.


General Settings
---------------------------------------------------------------------------------

Size
      Set the size of the terrain in real world units. This affects the X and Y
      axis. 

Max Height
      Set the vertical scale. The terrain will always start at zero on the Z
      axis and go up to this value. Note that if you increase the *Size* value
      you should also increase Max Height, or the generated terrain will
      be flatter.

.. image:: _static/terrain_proc_maxheight.jpg

Plateau
      Create plateaus (or mesas) by clipping the terrain at this
      height. If this value is higher than Max Height it will not
      affect the terrain.

.. image:: _static/terrain_proc_plateau.jpg
      
Sea Level
      Make everything below this height flat (set to zero). Note the terrain
      will be moved down so it rests on 0 in the Z axis. This setting
      will make the final height of the terrain shorter.
      
.. image:: _static/terrain_proc_sealevel.jpg


Roughness
      Set how coarse the terrain is, and how many small details and
      perturbations it has. Small roughness will produce very smooth
      dune-like terrains, while higher roughness add lots of small
      peaks and valleys. 

.. image:: _static/terrain_proc_roughness.jpg

Alpine
     Increase difference between valleys and peaks. Peaks become more
     vertical, while valleys and plains become flatter.

.. image:: _static/terrain_proc_alpine.jpg

Deformation
     Make the terrain more "twisty" and increase the amount of ridges.


.. image:: _static/terrain_proc_deformation.jpg

Seed
     This is a number used to initialize the terrain algorithm.
     Different values will produce different terrains, however a specific
     seed will always generate the same.

Auto-seed (clock icon)
     Use a different seed every time a terrain is generated. The seed
     value will be updated, so you can un-tick it if you find a seed
     value you would like to keep.



Edges
---------------------------------------------------------------------------------

No edges
     Terrain ends where it ends, nothing is done to the edges.

.. image:: _static/terrain_proc_edge_none.jpg

   
Straight Edge
    Edges are set to zero, becoming straight with no transition. If you set
    all initial heights you can get a cube with this.

.. image:: _static/terrain_proc_edge_straight.jpg

Smoothed
    Edges are set to zero, but the height gradually transitions from the center
    of the mesh to the edges. Useful for islands and single mountains.
    When this edge is selected, another setting called "Smooth Factor" will
    show up. This setting will allow you to control how gradual the smoothing is.

.. image:: _static/terrain_proc_edge_smooth.jpg
	   

Island
    Sets the edges to smoothed and automatically creates an ocean object
    (using the ocean modifier). 

.. image:: _static/terrain_proc_edge_island.jpg


Features
---------------------------------------------------------------------------------

These are optional effects that can be applied to the terrain. You turn them
on and off by ticking the checkboxes next to them. Select them to see a short
description and their settings.

Strata
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Make the terrain stratified (step-like)

.. image:: _static/terrain_proc_strata.jpg

Frequency
       How many "steps" to use

Strength
       Set how much this effect changes the terrain

Invert Slope
       Invert the direction of the slope between steps



Thermal Erosion
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Simulates loosening and clumping of soil because of temperature changes.

.. image:: _static/terrain_proc_thermal.jpg

Repose Angle
       Angle at which the terrain material piles without slumping. Decreasing
       the angle will flatten the terrain more. It's also know as the Talus angle.

Strength
       Set how much this effect changes the terrain
       


Slopes
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Gradually lower the height of the terrain. This feature replaces the old
"initial heights". These settings are repeated twice, for the X and Y axis.

.. image:: _static/terrain_proc_slopes.jpg

Intensity
      Set how far into the terrain the effect will go (how smooth)

Minimum Height
      Set a percentage of height as the lowest the effect will go

Invert
      Invert the direction of the effect along it's axis
  


