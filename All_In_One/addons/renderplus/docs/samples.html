

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Pre/Post Actions &mdash; Render+ 0.8.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Render+ 0.8.0 documentation" href="index.html"/>
        <link rel="next" title="Changelog" href="full_changelog.html"/>
        <link rel="prev" title="Feature List" href="feature_list.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Render+</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="preferences.html">Preferences</a><ul>
<li class="toctree-l2"><a class="reference internal" href="preferences.html#general-options">General Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="preferences.html#notifications">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="preferences.html#batch">Batch</a></li>
<li class="toctree-l2"><a class="reference internal" href="preferences.html#help">Help</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="general_settings.html">General Settings</a><ul>
<li class="toctree-l2"><a class="reference internal" href="general_settings.html#background-renders">Background Renders</a></li>
<li class="toctree-l2"><a class="reference internal" href="general_settings.html#preview-render">Preview Render</a></li>
<li class="toctree-l2"><a class="reference internal" href="general_settings.html#auto-save-images">Auto save Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="general_settings.html#notifications">Notifications</a></li>
<li class="toctree-l2"><a class="reference internal" href="general_settings.html#power-off">Power Off</a></li>
<li class="toctree-l2"><a class="reference internal" href="general_settings.html#slots-menu">Slots Menu</a></li>
<li class="toctree-l2"><a class="reference internal" href="general_settings.html#stats">Stats</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="batch.html">Batch Renders</a><ul>
<li class="toctree-l2"><a class="reference internal" href="batch.html#render-job-tabs">Render job tabs</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch.html#custom-overrides">Custom Overrides</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch.html#global-settings">Global Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch.html#rss">RSS</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch.html#autogenerate-jobs">Autogenerate jobs</a></li>
<li class="toctree-l2"><a class="reference internal" href="batch.html#scripting">Scripting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="feature_list.html">Feature List</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Pre/Post Actions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#code-samples">Code Samples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="full_changelog.html">Changelog</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Render+</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>Pre/Post Actions</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/samples.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="pre-post-actions">
<h1>Pre/Post Actions<a class="headerlink" href="#pre-post-actions" title="Permalink to this headline">¶</a></h1>
<img alt="_images/post_actions.png" src="_images/post_actions.png" />
<p>Pre and Post render actions allow you to run commands or python scripts before the render starts or after it finishes. They can be used to send messages, emails, upload files via FTP, copy them to another folder, and more.</p>
<p>Click the buttons to enable them. A box with settings will appear below them, you use the dropdown to select whether to use a command or a script.</p>
<p>Python scripts need to be loaded into (or created in) Blender to be used from Render+.</p>
<p>Remember to use absolute paths in your commands (eg <em>&#8220;c:user/me&#8221;</em>, <em>&#8220;/home/me/&#8221;</em>).
Note that pre/post render actions are disabled every time you open a blend file for security reasons.</p>
<div class="section" id="code-samples">
<h2>Code Samples<a class="headerlink" href="#code-samples" title="Permalink to this headline">¶</a></h2>
<p>Some code samples bla bla</p>
<div class="section" id="copy-rendered-image-to-dropbox-folder">
<h3>Copy Rendered image to Dropbox folder<a class="headerlink" href="#copy-rendered-image-to-dropbox-folder" title="Permalink to this headline">¶</a></h3>
<p>Run this as a post render action</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">bpy</span>

<span class="n">rendered</span> <span class="o">=</span> <span class="n">bpy</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">filepath</span><span class="p">)</span>
<span class="n">dropbox</span>  <span class="o">=</span> <span class="s">&#39;/path/to/your/dropbox&#39;</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">shutil</span><span class="o">.</span><span class="n">copy2</span><span class="p">(</span><span class="n">rendered</span><span class="p">,</span> <span class="n">dropbox</span><span class="p">)</span>
<span class="k">except</span> <span class="n">PermissionError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39;Not allowed to copy&#39;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">FileNotFoundError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39;File not found!&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="clean-folder-before-rendering">
<h3>Clean folder before rendering<a class="headerlink" href="#clean-folder-before-rendering" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">bpy</span>

<span class="n">output</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">render</span><span class="o">.</span><span class="n">filepath</span><span class="p">))</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">output</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">f</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">PermissionError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Not allowed to delete &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
    <span class="k">except</span> <span class="n">FileNotFoundError</span><span class="p">:</span>
        <span class="k">continue</span>
</pre></div>
</div>
</div>
<div class="section" id="zip-and-mail">
<h3>Zip and mail<a class="headerlink" href="#zip-and-mail" title="Permalink to this headline">¶</a></h3>
<p><strong>Linux/Mac OS X</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">bpy</span>
<span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">call</span>

<span class="c"># Settings --------------------------------------------------------------------------</span>

<span class="c"># Change the settings to point to your files, mail address, etc.</span>
<span class="c"># You need to have sendmail installed and configured to send the email.</span>

<span class="n">files_to_zip</span>         <span class="o">=</span> <span class="s">&#39;/home/[USER]/my_project/render&#39;</span>
<span class="n">zip_to</span>               <span class="o">=</span> <span class="s">&#39;/home/[USER]/something/file.zip&#39;</span>
<span class="n">mail_address</span>         <span class="o">=</span> <span class="s">&#39;my_mail@example.com&#39;</span>
<span class="n">mail_subject</span>         <span class="o">=</span> <span class="s">&#39;Your Render is done!&#39;</span>

<span class="n">call</span><span class="p">(</span><span class="s">&quot;zip -r &quot;</span> <span class="o">+</span> <span class="n">zip_to</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">files_to_zip</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">rendertime</span> <span class="o">=</span> <span class="s">&#39;echo &quot;Rendertime: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">renderplus</span><span class="o">.</span><span class="n">renderTime</span><span class="p">)</span> <span class="o">+</span> <span class="s">&#39;&quot;&#39;</span>
<span class="n">call</span><span class="p">(</span><span class="n">rendertime</span> <span class="o">+</span> <span class="s">&#39; | mail -s &quot;&#39;</span> <span class="o">+</span> <span class="n">mail_subject</span> <span class="o">+</span> <span class="s">&#39;&quot; &#39;</span> <span class="o">+</span> <span class="n">mail_address</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Windows</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">bpy</span>

<span class="kn">import</span> <span class="nn">smtplib</span>
<span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">call</span>
<span class="kn">from</span> <span class="nn">email.mime.text</span> <span class="kn">import</span> <span class="n">MIMEText</span>


<span class="c"># Settings --------------------------------------------------------------------------</span>

<span class="c"># Change the settings to point to your files, mail address, etc.</span>

<span class="n">files_to_zip</span>         <span class="o">=</span> <span class="s">&#39;c:</span><span class="se">\\</span><span class="s">Users</span><span class="se">\\</span><span class="s">me</span><span class="se">\\</span><span class="s">blenderProject&#39;</span>
<span class="n">zip_to</span>               <span class="o">=</span> <span class="s">&#39;c:</span><span class="se">\\</span><span class="s">Users</span><span class="se">\\</span><span class="s">me</span><span class="se">\\</span><span class="s">/something/file.zip&#39;</span>
<span class="n">smtp_server</span>          <span class="o">=</span> <span class="s">&#39;smtp.yourserver.com&#39;</span>

<span class="n">rendertime</span>           <span class="o">=</span> <span class="s">&#39;Rendertime: &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">bpy</span><span class="o">.</span><span class="n">context</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">renderplus</span><span class="o">.</span><span class="n">renderTime</span><span class="p">)</span>
<span class="n">mail</span>                 <span class="o">=</span> <span class="n">MIMEText</span><span class="p">(</span><span class="n">rendertime</span><span class="p">)</span>
<span class="n">mail</span><span class="p">[</span><span class="s">&#39;To&#39;</span><span class="p">]</span>           <span class="o">=</span> <span class="s">&#39;my_mail@example.com&#39;</span>
<span class="n">mail</span><span class="p">[</span><span class="s">&#39;Subject&#39;</span><span class="p">]</span>      <span class="o">=</span> <span class="s">&#39;Your Render is done!&#39;</span>


<span class="c"># Note that you need to have 7zip installed for the zipping command</span>

<span class="n">call</span><span class="p">(</span><span class="s">&quot;7z.exe a -r &quot;</span> <span class="o">+</span> <span class="n">zip_to</span> <span class="o">+</span> <span class="s">&quot; &quot;</span> <span class="o">+</span> <span class="n">files_to_zip</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c"># To learn more about sending mails with Python check</span>
<span class="c"># https://docs.python.org/3.4/library/email-examples.html</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">smtplib</span><span class="o">.</span><span class="n">SMTP</span><span class="p">(</span><span class="n">smtp_server</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">sendmail</span><span class="p">(</span><span class="s">&#39;me@blender.org&#39;</span><span class="p">,</span> <span class="n">mail</span><span class="p">[</span><span class="s">&#39;To&#39;</span><span class="p">]</span> <span class="p">,</span> <span class="n">mail</span><span class="o">.</span><span class="n">as_string</span><span class="p">())</span>
<span class="n">s</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="full_changelog.html" class="btn btn-neutral float-right" title="Changelog"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="feature_list.html" class="btn btn-neutral" title="Feature List"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Diego Gangl.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.8.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>